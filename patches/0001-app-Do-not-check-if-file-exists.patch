From e63598b80f845e817a866e736a43e9f7ee53e107 Mon Sep 17 00:00:00 2001
From: Maximiliano Sandoval R <msandova@gnome.org>
Date: Thu, 28 Sep 2023 22:20:19 +0200
Subject: [PATCH] app: Do not check if file exists

This always fails in a sandbox.
---
 src/application.rs | 31 +++++++++++--------------------
 1 file changed, 11 insertions(+), 20 deletions(-)

diff --git a/src/application.rs b/src/application.rs
index 2163948..f17feb8 100644
--- a/src/application.rs
+++ b/src/application.rs
@@ -53,27 +53,18 @@ mod imp {
 
         fn open(&self, files: &[gio::File], _hint: &str) {
             debug!("Application::open");
-            files
-                .iter()
-                .filter(|f| {
-                    let exists = f.query_exists(gio::Cancellable::NONE);
-                    if !exists {
-                        log::error!("File {} does not exists", f.uri());
+            files.iter().for_each(|f| {
+                let window = Window::new(&self.obj());
+                let group = gtk::WindowGroup::new();
+                group.add_window(&window);
+
+                crate::spawn!(glib::clone!(@weak window, @strong f => async move {
+                    match window.open(&f).await {
+                        Ok(_) => window.present(),
+                        Err(err) => log::error!("Could not open {}: {err}", f.uri()),
                     }
-                    exists
-                })
-                .for_each(|f| {
-                    let window = Window::new(&self.obj());
-                    let group = gtk::WindowGroup::new();
-                    group.add_window(&window);
-
-                    crate::spawn!(glib::clone!(@weak window, @strong f => async move {
-                        match window.open(&f).await {
-                            Ok(_) => window.present(),
-                            Err(err) => log::error!("Could not open {}: {err}", f.uri()),
-                        }
-                    }));
-                });
+                }));
+            });
         }
     }
 
-- 
2.41.0

